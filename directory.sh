#!/bin/bash

# Запрашиваем у пользователя путь к директории для резервного копирования
read -p "Введите путь к директории для резервного копирования: " source_dir

# Проверяем, существует ли указанная директория
if [ ! -d "$source_dir" ]; then
    echo "Ошибка: Директория '$source_dir' не существует."
    exit 1
fi

# Запрашиваем у пользователя путь для сохранения резервной копии
read -p "Введите путь для сохранения резервной копии: " backup_dir

# Создаем резервную копию с временной меткой
timestamp=$(date +"%Y%m%d_%H%M%S")
backup_name="backup_$(basename "$source_dir")_$timestamp.tar.gz"

# Создаем резервную копию
tar -czf "$backup_dir/$backup_name" -C "$source_dir" .

# Проверяем успешность операции
if [ $? -eq 0 ]; then
    echo "Резервная копия успешно создана: $backup_dir/$backup_name"
else
    echo "Ошибка при создании резервной копии."
    exit 1
fi
